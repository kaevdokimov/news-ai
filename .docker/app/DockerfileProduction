FROM ghcr.io/kaevdokimov/php:php84

# Build arguments
ARG APP_DIR=/var/www/app

# Environment variables
ENV APP_DIR=${APP_DIR}

# Copy application files
COPY --chown=www-data:staff ./ ${APP_DIR}
COPY ./.docker/app/php/fpm/php.ini /usr/local/etc/php/php.ini

RUN chmod +x ${APP_DIR}/.docker/app/cmd.sh

WORKDIR ${APP_DIR}
USER www-data
CMD ["/var/www/app/.docker/app/cmd.sh"]
